<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Unix | Eduard Luhtonen]]></title>
  <link href="http://luhtonen.github.com/blog/categories/unix/atom.xml" rel="self"/>
  <link href="http://luhtonen.github.com/"/>
  <updated>2013-03-20T12:42:43+02:00</updated>
  <id>http://luhtonen.github.com/</id>
  <author>
    <name><![CDATA[Eduard Luhtonen]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How to check memory usage on AIX]]></title>
    <link href="http://luhtonen.github.com/blog/2013/03/20/how-to-check-memory-usage-on-aix/"/>
    <updated>2013-03-20T11:31:00+02:00</updated>
    <id>http://luhtonen.github.com/blog/2013/03/20/how-to-check-memory-usage-on-aix</id>
    <content type="html"><![CDATA[<p>AIX suppose to be Unix system, but there is lots of things are done very differently from other Unix systems. I needed to check memory usage on AIX machine, but didn't found well-known command <code>free</code>. After quick research on Web I found AIX own command: <code>svmon</code>. To get global information about memory usage only required option is <code>-G</code>.</p>

<pre>
> svmon -G
               size       inuse        free         pin     virtual   mmode
memory      1003520     1000352        3168      466861     1468212     Ded
pg space    2097152      829774

               work        pers        clnt       other
pin          435310           0           0       31551
in use       901152           0       99200

PageSize   PoolSize       inuse        pgsp         pin     virtual
s    4 KB         -      276720      252814       67101      409300
m   64 KB         -       45227       36060       24985       66182
</pre>


<h4>List installed software on AIX</h4>

<p><code>lslpp</code> is the tool to list installed softwares on AIX. 2 switchs are more useful:</p>

<pre>
-h
        Displays the installation and update history information for the 
        specified fileset. You cannot use this flag with the -J flag.

-L
        Displays the name, most recent level, state, and a description of 
        the specified fileset. The build date, which is specified by the 
        year and the week in the form of yyww (for example, 0852), is also 
        displayed for a fileset, if it has one. Part information (usr, 
        root, and share) is consolidated into the same listing. For 
        formatted filesets, it displays the most recent maintenance or 
        technology level for the specified filesets. In addition, this 
        flag lists any subsystem selective fixes that were installed on 
        top of the maintenance or technology level. RPM and ISMP images 
        are also listed.
</pre>


<p>Sample from <code>lslpp -h all</code> (not a full listing)</p>

<pre>
 > lslpp -h all
  Fileset         Level     Action       Status       Date         Time
  ----------------------------------------------------------------------------
Path: /usr/lib/objrepos
  Firefox.base.adt
                 3.5.13.1   COMMIT       COMPLETE     12/05/12     12:15:19

  Firefox.base.rte
                 3.5.13.1   COMMIT       COMPLETE     12/05/12     12:15:19

  GSKit8.gskcrypt32.ppc.rte
                 8.0.14.6   COMMIT       COMPLETE     03/26/12     09:51:05

  GSKit8.gskcrypt64.ppc.rte
                8.0.14.14   COMMIT       COMPLETE     01/03/13     12:10:33

  GSKit8.gskssl32.ppc.rte
                 8.0.14.6   COMMIT       COMPLETE     03/26/12     09:51:13

  GSKit8.gskssl64.ppc.rte
                8.0.14.14   COMMIT       COMPLETE     01/03/13     12:10:35
...
</pre>


<p>Sample from <code>lslpp -L all</code> (not a full listing)</p>

<pre>
> lslpp -L all
  Fileset                      Level  State  Type  Description (Uninstaller)
  ----------------------------------------------------------------------------
  Firefox.base.adt          3.5.13.1    C     F    Firefox Development Tools
  Firefox.base.rte          3.5.13.1    C     F    Firefox Web Browser
  GSKit8.gskcrypt32.ppc.rte
                            8.0.14.6    C     F    IBM GSKit Cryptography Runtime
  GSKit8.gskcrypt64.ppc.rte
                           8.0.14.14    C     F    IBM GSKit Cryptography Runtime
  GSKit8.gskssl32.ppc.rte   8.0.14.6    C     F    IBM GSKit SSL Runtime With
                                                   Acme Toolkit
  GSKit8.gskssl64.ppc.rte  8.0.14.14    C     F    IBM GSKit SSL Runtime With
                                                   Acme Toolkit
...

State codes:
 A -- Applied.
 B -- Broken.
 C -- Committed.
 E -- EFIX Locked.
 O -- Obsolete.  (partially migrated to newer version)
 ? -- Inconsistent State...Run lppchk -v.

Type codes:
 F -- Installp Fileset
 P -- Product
 C -- Component
 T -- Feature
 R -- RPM Package
E -- Interim Fix
</pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How make Java to trust self signed certificate]]></title>
    <link href="http://luhtonen.github.com/blog/2013/03/14/how-make-java-to-trust-self-signed-certificate/"/>
    <updated>2013-03-14T15:24:00+02:00</updated>
    <id>http://luhtonen.github.com/blog/2013/03/14/how-make-java-to-trust-self-signed-certificate</id>
    <content type="html"><![CDATA[<p>We've been doing update to our customers systems and one of the part what was update Java to new version. With the update we've lost our <em>cacerts</em> file. In result Java stopped to trust our self signed certificate: <code>The certificate issued by &lt;..&gt; is not trusted;</code></p>

<p>To resolve this issue, we needed to add self signed certifate to Java's trusted certificate list.</p>

<pre>
> sudo su -
> cd <i>install_directory</i>
> mkdir certs
> openssl s_client -connect <i>remote_host</i>:<i>remote_port</i> 2>&1 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > certs/certfile.txt
> cp java/jre/lib/security/cacerts java/jre/lib/security/cacerts-`date -u +"%Y%m%d"`
> java/jre/bin/keytool -import -noprompt -trustcacerts -alias "mycert" -file certs/certfile.txt -keystore java/jre/lib/security/cacerts -storepass changeit
</pre>


<h4>Explanations</h4>

<ol>
<li>Since we have our tool installed as <em>root</em>, we need to <em>sudo</em> as <em>root</em></li>
<li>Change to tool installation directory, replace <em>install_directory</em> with correct value. Java was installed under it in <em>java</em> subdirectory.</li>
<li>Create directory to store certificate to be downloaded from  remote host</li>
<li>Download certificate from remote host and store it in <em>certs</em> directory in <em>certfile.txt</em> file. <em>remote_host</em> need to be replaced with correct host name or ip addres and <em>remote_port</em> need to be replaced with correct port.</li>
<li>Make backup of <em>cacerts</em> file</li>
<li>Add self signed certificate to <em>cacerts</em> file. Here's some important options:</li>
</ol>


<p><em>-noprompt</em> - suppress interactive prompting</p>

<p><em>-trustcerts</em> - set certificate trust attribute to yes and don't ask from user</p>

<p><em>-alias "alias_name"</em> - is alias used by keytool to find certificate from the list, if alias is already in the list certificate value is replace, otherwise new certificate is added to the <em>cacerts</em> file</p>

<p><em>-storepass pass</em> - password for key store, <em>changeit</em> is default</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to check AIX version and other useful information]]></title>
    <link href="http://luhtonen.github.com/blog/2013/01/22/how-to-check-aix-version-and-other-useful-information/"/>
    <updated>2013-01-22T19:22:00+02:00</updated>
    <id>http://luhtonen.github.com/blog/2013/01/22/how-to-check-aix-version-and-other-useful-information</id>
    <content type="html"><![CDATA[<p>I was sending technical request to our support team and needed to find out what is a version of operating system. I've been working with many different Unix/Linux flavors and always used <code>uname -a</code>. I was surpised to find out that on AIX this command shows OS version only with 1 digit.</p>

<p>I've already noticed that since AIX default shell is KSH, some things are done differently on it. After a brief research I've found command which would produce information I needed: <code>oslevel</code>.
```</p>

<blockquote><p>oslevel -g</p>

<h2>Fileset                                 Actual Level        Maintenance Level</h2>

<p>bos.rte                                 7.1.1.16            7.1.0.0
```</p></blockquote>

<p>In IBM's <a href="http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=%2Fcom.ibm.aix.cmds%2Fdoc%2Faixcmds4%2Foslevel.htm">AIX 7.1 Information Center</a> can find more information about this command and many other.</p>
]]></content>
  </entry>
  
</feed>
